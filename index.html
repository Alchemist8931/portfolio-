<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AeroSpace Dynamics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg: #050506;
            --bg-elevated: #0a0a0c;
            --fg: #f0f0f2;
            --fg-muted: #6e6e78;
            --accent: #a8b4c0;
            --accent-warm: #c4a882;
            --border: rgba(255,255,255,0.06);
        }
        
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Space Grotesk', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--fg);
            overflow-x: hidden;
            line-height: 1.6;
            font-weight: 300;
            letter-spacing: 0.01em;
        }
        
        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 2px; }
        
        :focus-visible { 
            outline: 1px solid var(--accent); 
            outline-offset: 4px; 
        }

        #canvas-container {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1.5rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, var(--bg), transparent);
            transition: background 0.4s ease;
        }
        
        nav.scrolled {
            background: rgba(5,5,6,0.95);
            backdrop-filter: blur(20px);
        }
        
        .logo {
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--fg);
            text-decoration: none;
        }
        
        .logo span { color: var(--fg-muted); }
        
        .nav-links {
            display: flex;
            gap: 3rem;
            list-style: none;
        }
        
        .nav-links a {
            color: var(--fg-muted);
            text-decoration: none;
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            transition: color 0.3s ease;
            position: relative;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--accent);
            transition: width 0.3s ease;
        }
        
        .nav-links a:hover { color: var(--fg); }
        .nav-links a:hover::after { width: 100%; }

        /* Sections */
        section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            z-index: 10;
            pointer-events: none;
        }
        
        section > * { pointer-events: auto; }

        /* Hero */
        #hero {
            height: 100vh;
            justify-content: flex-start;
            padding: 0 8%;
        }
        
        .hero-content {
            max-width: 600px;
        }
        
        .hero-eyebrow {
            font-size: 0.65rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .hero-eyebrow::before {
            content: '';
            width: 24px;
            height: 1px;
            background: var(--accent);
        }
        
        .hero-title {
            font-size: clamp(2.5rem, 7vw, 4.5rem);
            font-weight: 300;
            line-height: 1.1;
            letter-spacing: -0.02em;
            margin-bottom: 1.5rem;
        }
        
        .hero-title strong {
            font-weight: 500;
            color: var(--fg);
        }
        
        .hero-desc {
            font-size: 0.95rem;
            color: var(--fg-muted);
            margin-bottom: 3rem;
            max-width: 440px;
            line-height: 1.8;
        }
        
        .hero-actions {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.9rem 1.8rem;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--fg);
            font-family: inherit;
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            border-color: var(--accent);
            background: rgba(168,180,192,0.05);
        }
        
        .btn-primary {
            background: var(--fg);
            border-color: var(--fg);
            color: var(--bg);
        }
        
        .btn-primary:hover {
            background: var(--accent);
            border-color: var(--accent);
        }
        
        .btn svg {
            width: 14px;
            height: 14px;
            transition: transform 0.3s ease;
        }
        
        .btn:hover svg { transform: translateX(3px); }

        .scroll-hint {
            position: absolute;
            bottom: 3rem;
            left: 8%;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--fg-muted);
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
        }
        
        .scroll-hint::after {
            content: '';
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, var(--fg-muted), transparent);
        }

        /* Gallery */
        #gallery {
            padding: 10rem 8%;
            flex-direction: column;
            justify-content: center;
            background: linear-gradient(to bottom, transparent, var(--bg-elevated) 20%, var(--bg-elevated) 80%, transparent);
        }
        
        .section-header {
            margin-bottom: 4rem;
        }
        
        .section-label {
            font-size: 0.6rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 1rem;
        }
        
        .section-title {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 300;
            letter-spacing: -0.01em;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: var(--border);
            max-width: 1200px;
            width: 100%;
        }
        
        .gallery-item {
            position: relative;
            aspect-ratio: 4/3;
            background: var(--bg);
            overflow: hidden;
            cursor: pointer;
            transition: background 0.4s ease;
        }
        
        .gallery-item:hover {
            background: var(--bg-elevated);
        }
        
        .gallery-bg {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8rem;
            font-weight: 200;
            color: rgba(168,180,192,0.03);
            transition: all 0.5s ease;
        }
        
        .gallery-item:hover .gallery-bg {
            color: rgba(168,180,192,0.08);
            transform: scale(1.05);
        }
        
        .gallery-info {
            position: absolute;
            inset: 0;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            background: linear-gradient(to top, var(--bg) 0%, transparent 60%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .gallery-item:hover .gallery-info {
            opacity: 1;
        }
        
        .gallery-info h3 {
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            margin-bottom: 0.3rem;
        }
        
        .gallery-info p {
            font-size: 0.75rem;
            color: var(--fg-muted);
        }

        /* Process */
        #process {
            padding: 10rem 8%;
            flex-direction: column;
            justify-content: center;
        }
        
        .process-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 3rem;
            max-width: 1200px;
            width: 100%;
        }
        
        .process-item {
            position: relative;
            padding-top: 2rem;
        }
        
        .process-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 24px;
            height: 1px;
            background: var(--accent);
        }
        
        .process-number {
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            color: var(--fg-muted);
            margin-bottom: 1.5rem;
        }
        
        .process-item h3 {
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 0.02em;
            margin-bottom: 0.8rem;
        }
        
        .process-item p {
            font-size: 0.8rem;
            color: var(--fg-muted);
            line-height: 1.7;
        }

        /* Specs */
        #specs {
            padding: 10rem 8%;
            justify-content: center;
        }
        
        .specs-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6rem;
            max-width: 1200px;
            width: 100%;
            align-items: center;
        }
        
        .specs-data {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }
        
        .spec-item {
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border);
        }
        
        .spec-value {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: -0.02em;
            color: var(--fg);
            margin-bottom: 0.3rem;
        }
        
        .spec-value span {
            font-size: 1rem;
            color: var(--fg-muted);
            margin-left: 0.3rem;
        }
        
        .spec-label {
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--fg-muted);
        }

        /* Contact */
        #contact {
            padding: 10rem 8%;
            justify-content: center;
            background: linear-gradient(to top, var(--bg-elevated), transparent);
        }
        
        .contact-container {
            max-width: 500px;
            text-align: center;
        }
        
        .contact-container .section-title {
            margin-bottom: 1rem;
        }
        
        .contact-desc {
            font-size: 0.9rem;
            color: var(--fg-muted);
            margin-bottom: 2.5rem;
        }
        
        .contact-form {
            display: flex;
            gap: 0;
            border: 1px solid var(--border);
        }
        
        .contact-input {
            flex: 1;
            padding: 1rem 1.2rem;
            background: transparent;
            border: none;
            color: var(--fg);
            font-family: inherit;
            font-size: 0.85rem;
            letter-spacing: 0.02em;
        }
        
        .contact-input:focus {
            outline: none;
        }
        
        .contact-input::placeholder {
            color: var(--fg-muted);
        }

        /* Footer */
        footer {
            position: relative;
            padding: 3rem 8%;
            z-index: 20;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-copy {
            font-size: 0.7rem;
            color: var(--fg-muted);
            letter-spacing: 0.1em;
        }
        
        .footer-links {
            display: flex;
            gap: 2rem;
        }
        
        .footer-links a {
            color: var(--fg-muted);
            text-decoration: none;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: var(--fg);
        }

        /* Progress */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 1px;
            background: var(--accent);
            z-index: 1000;
        }

        /* Loading */
        .loading-screen {
            position: fixed;
            inset: 0;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-logo {
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 0.3em;
            margin-bottom: 2rem;
        }
        
        .loading-logo span { color: var(--fg-muted); }
        
        .loading-bar {
            width: 120px;
            height: 1px;
            background: var(--border);
            position: relative;
            overflow: hidden;
        }
        
        .loading-progress {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.2s ease;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            nav { padding: 1.2rem 2rem; }
            .nav-links { display: none; }
            #hero, #gallery, #process, #specs, #contact { padding: 6rem 5%; }
            .gallery-grid { grid-template-columns: repeat(2, 1fr); }
            .process-grid { grid-template-columns: repeat(2, 1fr); }
            .specs-container { grid-direction: column; gap: 4rem; }
        }
        
        @media (max-width: 640px) {
            .gallery-grid { grid-template-columns: 1fr; }
            .process-grid { grid-template-columns: 1fr; gap: 2rem; }
            .specs-container { grid-template-columns: 1fr; }
            .specs-data { grid-template-columns: 1fr; }
            .hero-actions { flex-direction: column; }
            .footer-content { flex-direction: column; gap: 1.5rem; text-align: center; }
            .scroll-hint { display: none; }
        }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen" role="status" aria-label="Загрузка">
        <div class="loading-logo">Aero<span>Space</span></div>
        <div class="loading-bar"><div class="loading-progress" id="loadingProgress"></div></div>
    </div>
    
    <div class="progress-bar" id="progressBar"></div>

    <nav role="navigation" id="mainNav">
        <a href="#hero" class="logo">Aero<span>Space</span></a>
        <ul class="nav-links">
            <li><a href="#hero">Home</a></li>
            <li><a href="#gallery">Production</a></li>
            <li><a href="#process">Process</a></li>
            <li><a href="#specs">Specifications</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <div id="canvas-container" aria-hidden="true"></div>

    <main>
        <section id="hero">
            <div class="hero-content">
                <p class="hero-eyebrow">Engineering Excellence</p>
                <h1 class="hero-title">Precision in<strong>every dimension</strong></h1>
                <p class="hero-desc">We engineer the future of aviation. Every curve, every component — a synthesis of advanced technology and refined aesthetics.</p>
                <div class="hero-actions">
                    <button class="btn btn-primary" type="button">
                        <span>Explore</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </button>
                    <button class="btn" type="button"><span>Learn more</span></button>
                </div>
            </div>
            <div class="scroll-hint">Scroll</div>
        </section>

        <section id="gallery">
            <div class="section-header">
                <p class="section-label">Production</p>
                <h2 class="section-title">Where flight begins</h2>
            </div>
            <div class="gallery-grid">
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">01</div>
                    <div class="gallery-info"><h3>Turbine Shop</h3><p>Micron-level precision in every component.</p></div>
                </article>
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">02</div>
                    <div class="gallery-info"><h3>Composites</h3><p>Woven from strength and lightness.</p></div>
                </article>
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">03</div>
                    <div class="gallery-info"><h3>Wing Assembly</h3><p>Aerodynamic perfection of form.</p></div>
                </article>
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">04</div>
                    <div class="gallery-info"><h3>Avionics</h3><p>The brain of a modern aircraft.</p></div>
                </article>
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">05</div>
                    <div class="gallery-info"><h3>Fuselage</h3><p>Harmony of form and function.</p></div>
                </article>
                <article class="gallery-item" tabindex="0">
                    <div class="gallery-bg">06</div>
                    <div class="gallery-info"><h3>Testing</h3><p>Thousands of hours of validation.</p></div>
                </article>
            </div>
        </section>

        <section id="process">
            <div class="section-header">
                <p class="section-label">Process</p>
                <h2 class="section-title">From concept to sky</h2>
            </div>
            <div class="process-grid">
                <div class="process-item">
                    <div class="process-number">01</div>
                    <h3>Concept</h3>
                    <p>Starting from a blank canvas. Engineers and designers collaborate to create initial concepts of the future aircraft.</p>
                </div>
                <div class="process-item">
                    <div class="process-number">02</div>
                    <h3>Design</h3>
                    <p>Digital models are born in supercomputers. Every detail is calculated with nanometer precision.</p>
                </div>
                <div class="process-item">
                    <div class="process-number">03</div>
                    <h3>Manufacturing</h3>
                    <p>Components come to life. Robotic lines and master craftsmen transform blueprints into reality.</p>
                </div>
                <div class="process-item">
                    <div class="process-number">04</div>
                    <h3>First Flight</h3>
                    <p>Liftoff. The moment of truth when years of work find their confirmation in the sky.</p>
                </div>
            </div>
        </section>

        <section id="specs">
            <div class="specs-container">
                <div>
                    <p class="section-label">Specifications</p>
                    <h2 class="section-title">AS-350 Horizon</h2>
                    <p class="hero-desc" style="margin-top: 1.5rem;">The flagship of our lineup. A synthesis of innovation and engineering mastery. Every element designed for maximum efficiency and comfort.</p>
                </div>
                <div class="specs-data">
                    <div class="spec-item">
                        <div class="spec-value">1020<span>km/h</span></div>
                        <div class="spec-label">Cruise Speed</div>
                    </div>
                    <div class="spec-item">
                        <div class="spec-value">14,800<span>km</span></div>
                        <div class="spec-label">Range</div>
                    </div>
                    <div class="spec-item">
                        <div class="spec-value">14,500<span>m</span></div>
                        <div class="spec-label">Ceiling</div>
                    </div>
                    <div class="spec-item">
                        <div class="spec-value">380</div>
                        <div class="spec-label">Passengers</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact">
            <div class="contact-container">
                <p class="section-label">Contact</p>
                <h2 class="section-title">Start a conversation</h2>
                <p class="contact-desc">Leave your email and our specialists will contact you to discuss your project.</p>
                <form class="contact-form" onsubmit="return false;">
                    <input type="email" class="contact-input" placeholder="Email address" aria-label="Email">
                    <button type="submit" class="btn btn-primary"><span>Send</span></button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-copy">2024 AeroSpace Dynamics</div>
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Careers</a>
                <a href="#">Press</a>
                <a href="#">Privacy</a>
            </div>
        </div>
    </footer>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // Constants
        const EPS = 0.0001;
        const PARTICLE_COUNT = 800;
        const isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        // State
        let time = 0;
        let scrollProgress = 0;
        let targetScrollProgress = 0;

        // DOM
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingProgress = document.getElementById('loadingProgress');
        const progressBar = document.getElementById('progressBar');
        const container = document.getElementById('canvas-container');
        const mainNav = document.getElementById('mainNav');

        // Three.js Setup
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050506, 0.004);

        const camera = new THREE.PerspectiveCamera(
            45,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.set(25, 3, 30);

        const renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: true,
            powerPreference: "high-performance"
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.0;
        container.appendChild(renderer.domElement);

        // Colors
        const accentColor = new THREE.Color(0xa8b4c0);
        const warmColor = new THREE.Color(0xc4a882);

        // Airplane Group
        const airplane = new THREE.Group();
        scene.add(airplane);

        // Materials
        const bodyMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x0a0a0c,
            metalness: 0.95,
            roughness: 0.1,
            clearcoat: 0.3
        });

        const glassMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x050508,
            metalness: 0.0,
            roughness: 0.0,
            transmission: 0.85,
            transparent: true,
            thickness: 0.3
        });

        const accentMaterial = new THREE.MeshPhysicalMaterial({
            color: 0xa8b4c0,
            metalness: 0.9,
            roughness: 0.2,
            emissive: 0xa8b4c0,
            emissiveIntensity: 0.1
        });

        // Simplified Airplane
        function createAirplane() {
            // Fuselage
            const fuselageGeometry = new THREE.CapsuleGeometry(1.1, 14, 32, 64);
            fuselageGeometry.rotateZ(Math.PI / 2);
            const fuselage = new THREE.Mesh(fuselageGeometry, bodyMaterial);
            fuselage.castShadow = true;
            airplane.add(fuselage);

            // Nose
            const noseGeometry = new THREE.ConeGeometry(1.1, 3, 32);
            noseGeometry.rotateZ(-Math.PI / 2);
            const nose = new THREE.Mesh(noseGeometry, bodyMaterial);
            nose.position.x = 8.5;
            airplane.add(nose);

            // Cockpit
            const cockpitGeometry = new THREE.SphereGeometry(1.2, 32, 16, 0, Math.PI * 2, 0, Math.PI / 2.5);
            const cockpit = new THREE.Mesh(cockpitGeometry, glassMaterial);
            cockpit.scale.set(0.8, 0.35, 0.6);
            cockpit.position.set(5.5, 1.0, 0);
            cockpit.rotation.z = -0.15;
            airplane.add(cockpit);

            // Wings
            const wingShape = new THREE.Shape();
            wingShape.moveTo(0, 0);
            wingShape.lineTo(3.2, 0.3);
            wingShape.lineTo(3.2, -0.1);
            wingShape.lineTo(0, -0.15);
            wingShape.closePath();

            const wingExtrudeSettings = { depth: 7, bevelEnabled: false };
            const wingGeometry = new THREE.ExtrudeGeometry(wingShape, wingExtrudeSettings);

            [1, -1].forEach(side => {
                const wing = new THREE.Mesh(wingGeometry, bodyMaterial);
                wing.rotation.x = side > 0 ? -Math.PI / 2 : Math.PI / 2;
                wing.position.set(-0.5, -0.3, 0);
                if (side < 0) wing.scale.z = -1;
                wing.castShadow = true;
                airplane.add(wing);
            });

            // Engines
            const engineGeometry = new THREE.CylinderGeometry(0.5, 0.6, 3, 32);
            engineGeometry.rotateZ(Math.PI / 2);

            [4.2, -4.2].forEach(z => {
                const engine = new THREE.Mesh(engineGeometry, bodyMaterial);
                engine.position.set(0.5, -0.9, z);
                airplane.add(engine);
            });

            // Tail
            const vTailGeometry = new THREE.BoxGeometry(3, 3.5, 0.12);
            const vTail = new THREE.Mesh(vTailGeometry, bodyMaterial);
            vTail.position.set(-6.5, 2, 0);
            vTail.rotation.z = 0.15;
            airplane.add(vTail);

            const hTailGeometry = new THREE.BoxGeometry(2, 0.1, 5);
            const hTail = new THREE.Mesh(hTailGeometry, bodyMaterial);
            hTail.position.set(-6.5, 0.3, 0);
            airplane.add(hTail);

            // Accent line
            const lineGeometry = new THREE.BoxGeometry(12, 0.02, 0.08);
            const line = new THREE.Mesh(lineGeometry, accentMaterial);
            line.position.set(1, 1.15, 0);
            airplane.add(line);

            airplane.position.set(0, 0, 0);
            airplane.rotation.y = -0.3;
        }

        createAirplane();

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x0a0a0c, 0.5);
        scene.add(ambientLight);

        const keyLight = new THREE.DirectionalLight(0xffffff, 0.4);
        keyLight.position.set(30, 20, 20);
        scene.add(keyLight);

        const rimLight1 = new THREE.PointLight(0xa8b4c0, 1.5, 80);
        rimLight1.position.set(-25, 10, 0);
        scene.add(rimLight1);

        const rimLight2 = new THREE.PointLight(0xc4a882, 1, 80);
        rimLight2.position.set(0, -10, 30);
        scene.add(rimLight2);

        // Particles
        const particleGeometry = new THREE.BufferGeometry();
        const positions = new Float32Array(PARTICLE_COUNT * 3);
        const sizes = new Float32Array(PARTICLE_COUNT);
        const offsets = new Float32Array(PARTICLE_COUNT);

        for (let i = 0; i < PARTICLE_COUNT; i++) {
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.random() * Math.PI;
            const radius = 30 + Math.random() * 100;

            positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
            positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta) - 10;
            positions[i * 3 + 2] = radius * Math.cos(phi);

            sizes[i] = Math.random() * 2 + 0.5;
            offsets[i] = Math.random() * Math.PI * 2;
        }

        particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        particleGeometry.setAttribute('aSize', new THREE.BufferAttribute(sizes, 1));
        particleGeometry.setAttribute('aOffset', new THREE.BufferAttribute(offsets, 1));

        const particleMaterial = new THREE.ShaderMaterial({
            uniforms: {
                uTime: { value: 0 },
                uColor: { value: accentColor },
                uPixelRatio: { value: Math.min(window.devicePixelRatio, 2) }
            },
            vertexShader: `
                attribute float aSize;
                attribute float aOffset;
                varying float vAlpha;
                uniform float uTime;
                uniform float uPixelRatio;

                void main() {
                    vAlpha = aSize / 3.0;

                    vec3 pos = position;
                    pos.y += sin(uTime * 0.1 + aOffset) * 1.5;
                    pos.x += cos(uTime * 0.08 + aOffset) * 1.0;

                    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
                    gl_PointSize = aSize * uPixelRatio * (180.0 / max(-mvPosition.z, 1.0));
                    gl_Position = projectionMatrix * mvPosition;
                }
            `,
            fragmentShader: `
                uniform vec3 uColor;
                varying float vAlpha;

                void main() {
                    float dist = length(gl_PointCoord - vec2(0.5));
                    if (dist > 0.5) discard;

                    float alpha = (1.0 - smoothstep(0.0, 0.5, dist)) * vAlpha * 0.4;
                    gl_FragColor = vec4(uColor, alpha);
                }
            `,
            transparent: true,
            depthWrite: false,
            blending: THREE.AdditiveBlending
        });

        const particles = new THREE.Points(particleGeometry, particleMaterial);
        scene.add(particles);

        // Grid
        const gridHelper = new THREE.GridHelper(180, 40, 0x151518, 0x0a0a0c);
        gridHelper.position.y = -20;
        gridHelper.material.opacity = 0.4;
        gridHelper.material.transparent = true;
        scene.add(gridHelper);

        // Animation
        function animate() {
            requestAnimationFrame(animate);

            if (isReducedMotion) {
                renderer.render(scene, camera);
                return;
            }

            time += 0.016;
            scrollProgress += (targetScrollProgress - scrollProgress) * 0.05;

            // Particles
            particleMaterial.uniforms.uTime.value = time;

            // Airplane
            airplane.position.y = Math.sin(time * 0.3) * 0.15;
            airplane.rotation.y = -0.3 + scrollProgress * 0.4;
            airplane.rotation.x = Math.sin(scrollProgress * Math.PI) * 0.03;
            airplane.rotation.z = Math.sin(time * 0.2) * 0.008;

            // Lights
            rimLight1.intensity = 1.5 + scrollProgress * 2;
            rimLight2.intensity = 1 + scrollProgress * 1.5;

            // Camera
            const cameraRadius = 30 + scrollProgress * 6;
            const cameraAngle = -0.3 + scrollProgress * 0.25;

            camera.position.x = Math.cos(cameraAngle) * cameraRadius;
            camera.position.y = 3 + Math.sin(scrollProgress * Math.PI * 1.2) * 3;
            camera.position.z = Math.sin(cameraAngle) * cameraRadius;

            camera.lookAt(airplane.position);

            renderer.render(scene, camera);
        }

        animate();

        // Loading
        let loadProgress = 0;
        const loadingInterval = setInterval(() => {
            loadProgress += 3 + Math.random() * 5;
            if (loadProgress >= 100) {
                loadProgress = 100;
                clearInterval(loadingInterval);
                setTimeout(() => loadingScreen.classList.add('hidden'), 300);
            }
            if (loadingProgress) loadingProgress.style.width = `${loadProgress}%`;
        }, 30);

        // Events
        window.addEventListener('scroll', () => {
            const totalHeight = Math.max(1, document.documentElement.scrollHeight - window.innerHeight);
            targetScrollProgress = Math.max(0, Math.min(1, window.scrollY / totalHeight));

            if (progressBar) progressBar.style.width = `${targetScrollProgress * 100}%`;
            if (mainNav) mainNav.classList.toggle('scrolled', window.scrollY > 50);
        }, { passive: true });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            particleMaterial.uniforms.uPixelRatio.value = Math.min(window.devicePixelRatio, 2);
        });
    </script>
</body>
</html>
